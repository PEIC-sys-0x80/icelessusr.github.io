# uptime指令

#資訊科技 #終端指令 #網路引用資料 #linux/unix指令 #linux

[參考資料](https://tw.linux-console.net/?p=1215)

`uptime`指令的用途，就像是它名稱所暗示的那樣，能顯示目前這個系統自開機後已經運行了多長時間，同時也還會輸出一些其他數據，如當前時間、登入的用戶數以及過去1分鐘、5分鐘和15分鐘的**平均CPU負載**（Load Average）。

此指令常用於系統管理、伺服器監控與效能分析，讓管理者可以快速得知系統穩定度與效能負載情形。

---

## 語法

```
uptime [option]
```

也可以使用不帶任何選項的 `uptime` 指令，如下所示：

```
uptime
```

他將會顯示類似以下內容的輸出：

```
09:10:18 up 106 days, 32 min, 2 users, load average: 0.22, 0.41, 0.32
```

---



## 選項說明

| 選項                | 說明                 |
| ----------------- | ------------------ |
| `-p`, `--pretty`  | 僅顯示系統運行的持續時間，簡潔易讀。 |
| `-s`, `--since`   | 顯示系統上次啟動的時間。       |
| `-h`, `--help`    | 顯示說明與選項列表。         |
| `-V`, `--version` | 顯示指令版本資訊。          |

---

## 輸出欄位解釋

按照出現的順序，`uptime` 顯示的欄位說明如下：

1. **當前時間（Current time）**：如上例的 `09:10:18`。
2. **系統運行時間（Up time）**：`up 106 days, 32 min` 表示系統已連續運行106天又32分鐘。
3. **登入使用者數（Users logged in）**：顯示目前登入系統的使用者數量。
4. **系統平均負載（Load average）**：最後三個數值表示過去 1 分鐘、5 分鐘和 15 分鐘的 CPU 負載平均值。

---

## 系統平均負載（Load Average）詳解

Load average 是衡量系統資源使用狀況的重要指標，它表示的是「同時在爭用 CPU 的平均程序數量」。每個時間區段（1、5、15 分鐘）都提供不同時間尺度的效能趨勢。

* 若系統是單核心，load average 超過 1.0 表示 CPU 過載。
* 若系統有 N 個核心，則 load average 超過 N 就意味著可能過載。

舉例來說：

* **單核心系統**：0.80 表示 80% 忙碌；1.20 表示過載。
* **四核心系統**：2.00 是正常，4.00 表示完全負荷，超過 4.00 則是過載。

此外，平均負載包含兩種類型的程序：

* **可執行程序（runnable）**：正等待 CPU 的程序。
* **不可中斷程序（uninterruptible）**：如等待磁碟I/O的程序。

因此，load average 不僅反映 CPU 使用情況，還能間接指出 I/O 等瓶頸。


---

## 實例

### 1. 檢查系統目前運作狀態

```
uptime
```

範例輸出：

```
14:03:56 up 12 days,  6:03, 3 users, load average: 0.09, 0.12, 0.15
```

此輸出能快速顯示系統穩定運作中，且目前負載低。

---

### 2. 檢查系統啟動時間

使用 `-s` 可查看系統上次開機時間：

```
uptime -s

2019-05-31 11:49:17
```

適合用於追蹤伺服器是否曾意外重啟。

---

### 3. 只顯示運行時間（格式化輸出）

```
uptime -p

up 2 hours, 15 minutes
```

此輸出適合腳本中使用，或進行簡報時人類更易讀的格式。

---

### 4. 顯示版本資訊

```
uptime -V

procps-ng 3.3.10
```

可用於確認系統上安裝的 `uptime` 版本。

---

## 進階用途與應用場景

* **伺服器健康檢查腳本中使用**
  `uptime` 可結合 `grep` 或 `awk` 等工具進行自動化監控。

  ```bash
  uptime | awk -F'load average:' '{ print $2 }'
  ```

  這樣可擷取出平均負載數值供後續處理。

* **與 `top`、`w` 結合使用**
  `uptime` 與 `top` 命令提供的負載資訊一致，可搭配使用來更深入分析系統資源使用狀況。

* **偵測異常重啟**
  透過定期記錄 `uptime -s` 輸出，可追蹤是否有非預期重開機的狀況發生。

* **在報表或系統通知中顯示**
  可以將 `uptime -p` 的輸出整合進郵件或系統通知中，讓系統管理員快速掌握狀況。

---

`uptime` 是一個小巧卻功能強大的工具，對系統管理員來說是日常監控的利器。掌握它的各種用法有助於即時掌握伺服器的運行狀況與效能趨勢。